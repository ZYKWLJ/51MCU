C51 COMPILER V9.60.7.0   MAIN                                                              04/14/2025 20:04:11 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\3software\keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(D:\3software\keil\C51\INC\
                    -Atmel) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include<REGX52.h>
   2          void delay(unsigned nms)        //@11.0592MHz
   3          {
   4   1              unsigned char data i, j;
   5   1              while(nms)
   6   1              {
   7   2                      i = 2;
   8   2                      j = 199;
   9   2                      do
  10   2                      {
  11   3                              while (--j);
  12   3                      } while (--i);
  13   2                      nms--;
  14   2              }
  15   1      }
  16          
  17          unsigned int arr[11]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x00/*å…¨ç­*//*0110,1111*/};//0~9
             -çš„æ®µç 
  18          
  19          // ä¾æ¬¡å¯¹åº” 8 ä¸ªæ•°ç ç®¡çš„é€‰æ‹©
  20          // è¿™é‡Œå°† P2_2ã€P2_3ã€P2_4 çš„çŠ¶æ€åæ˜ åœ¨ä¸€ä¸ªå­—èŠ‚çš„ç¬¬ 2ã€3ã€4 ä½
  21          // æ ¹æ®æ­£ç¡®çš„ä½é€‰é€»è¾‘ä¿®æ”¹ P2_arr æ•°ç»„
  22          unsigned char P2_arr[8] = {
  23              0x1C,  // 0001 1100: LSC=1, LSB=1, LSA=1 â†’ æ•°ç ç®¡ 0
  24              0x18,  // 0001 1000: LSC=1, LSB=1, LSA=0 â†’ æ•°ç ç®¡ 1
  25              0x14,  // 0001 0100: LSC=1, LSB=0, LSA=1 â†’ æ•°ç ç®¡ 2
  26              0x10,  // 0001 0000: LSC=1, LSB=0, LSA=0 â†’ æ•°ç ç®¡ 3
  27              0x0C,  // 0000 1100: LSC=0, LSB=1, LSA=1 â†’ æ•°ç ç®¡ 4
  28              0x08,  // 0000 1000: LSC=0, LSB=1, LSA=0 â†’ æ•°ç ç®¡ 5
  29              0x04,  // 0000 0100: LSC=0, LSB=0, LSA=1 â†’ æ•°ç ç®¡ 6
  30              0x00   // 0000 0000: LSC=0, LSB=0, LSA=0 â†’ æ•°ç ç®¡ 7
  31          };
  32          
  33          
  34          void test1(){
  35   1              P2 = P2_arr[0];
  36   1              P0 = 0x06; // æ˜¾ç¤ºæ•°å­—1ï¼ˆbå’Œcæ®µäº®,å› ä¸ºå•ç‰‡æœºè‡ªåŠ¨ä¸Šç”µIOå£ä¸ºé˜³æï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å
             -°†0ä¸ªå£èµ‹å€¼ä¸º0è¿˜æ˜¯1ï¼Œå¦åˆ™å…¨äº®å½±å“ç»“æœï¼‰ï¼ˆæˆ–è€…P0=arr[2]ï¼‰
  37   1      }
  38          
  39          
  40          unsigned int count=0;
  41          void test2(){
  42   1              P2 = P2_arr[0];
  43   1              P0=0x00;
  44   1              while(1){
  45   2                      P0=arr[count++%10];
  46   2                      delay(1000);
  47   2              }       
  48   1      }
  49          
  50          unsigned int count1=0;
  51          
  52          void test3(){//é©±åŠ¨ç¬¬ä¸€åˆ°å…«ä¸ªç®¡å­(åŠ¨æ€æ˜¾ç¤º)ã€‚
C51 COMPILER V9.60.7.0   MAIN                                                              04/14/2025 20:04:11 PAGE 2   

  53   1              P0=0x00;
  54   1              while(1){
  55   2                      int i=0;
  56   2                      for(;i<8;i++){
  57   3                              delay(1);
  58   3                              P2=P2_arr[i];
  59   3                              P0=arr[i];
  60   3                      }
  61   2              }
  62   1      }
  63          
  64          
  65          unsigned long total_0=99999999;
  66          unsigned long total_1=99999999;
  67          int num(int index){//è¿”å›æŒ‡å®šä½çš„æ•°å­—ï¼Œæ³¨æ„æœ¬èº«çš„ä½æ•°åˆ¤æ–­ï¼å»æ‰å‰å¯¼0     
  68   1              unsigned long ret=total_1;
  69   1              int i=0;//ç»Ÿè®¡ä½æ•°
  70   1          int retArr[8] = {10, 10, 10, 10, 10, 10, 10, 10}; // é»˜è®¤å…¨ç­
  71   1              for(;ret>0;i++){//ç»Ÿè®¡å¯èƒ½çš„æ¯ä¸€ä½
  72   2                      retArr[i]=ret%10;
  73   2                      ret/=10;
  74   2              }
  75   1              if(index>i)return 10;//è¶…å‡ºä½æ•°çš„ç»Ÿä¸€ä¸äº®
  76   1              return retArr[index-1];
  77   1      }
  78          
  79          unsigned int delayInternal=1;//æ¯ä¸€ä¸ªæ•°ç ç®¡çš„å»¶æ—¶æ˜¾ç¤º
  80          
  81          void test4(){//é©±åŠ¨ç¬¬ä¸€åˆ°å…«ä¸ªç®¡å­, å€’è®¡æ—¶99999999ç§’ã€‚
  82   1              P0=0x00;//åˆå§‹çŠ¶æ€å…¨ä¸º0ï¼Œå³ç­
  83   1              while(1){
  84   2                      unsigned int count=0;
  85   2                      P2=0X00;
  86   2                      //8ä¸ªç®¡å­ä¼šç»´æŒ1s
  87   2                      while(count<1000){
  88   3                              int i = 1;
  89   3                              for (; i <= 8; i++) { // åŠ¨æ€æ‰«ææ˜¾ç¤ºå…«ä¸ªæ•°ç ç®¡
  90   4                                      P2=P2_arr[i-1];//é€‰ä¸­å“ªä¸€ä¸ªæ•°ç ç®¡
  91   4                                      P0 = arr[num(i)];//é€‰ä¸­å½“å‰æ•°ç ç®¡çš„é‚£å‡ ä¸ªæ®µï¼Œå³æ‰“å°å½“å‰æ•°ç ç®¡
  92   4                                      delay(delayInternal); // çŸ­æš‚å»¶æ—¶ï¼Œç”¨äºæ˜¾ç¤º
  93   4                                      P0 = 0x00; // æ¶ˆéš
  94   4                                      count+=delayInternal;
  95   4                              }
  96   3                      }
  97   2                      total_1--;
  98   2                      if(total_1==0)total_1=total_0;//å¾ªç¯
  99   2              }
 100   1      }
 101          
 102          
 103          void test5(){//é©±åŠ¨ç¬¬ä¸€åˆ°å…«ä¸ªç®¡å­, å€’è®¡æ—¶99999999ç§’ã€‚
 104   1              P0=0x00;//åˆå§‹çŠ¶æ€å…¨ä¸º0ï¼Œå³ç­
 105   1              while(1){
 106   2                      unsigned int count=0;
 107   2                      P2=0X00;
 108   2                      //8ä¸ªç®¡å­ä¼šç»´æŒ1s
 109   2                      while(count<1000){
 110   3                              int i = 1;
 111   3                              for (; i <= 8; i++) { // åŠ¨æ€æ‰«ææ˜¾ç¤ºå…«ä¸ªæ•°ç ç®¡
 112   4                                      P2=P2_arr[7-(i-1)];//é€‰ä¸­å“ªä¸€ä¸ªæ•°ç ç®¡(ä»å³å‡å°)
 113   4                                      P0 = arr[num(i)];//é€‰ä¸­å½“å‰æ•°ç ç®¡çš„é‚£å‡ ä¸ªæ®µï¼Œå³æ‰“å°å½“å‰æ•°ç ç®¡
 114   4                                      delay(delayInternal); // çŸ­æš‚å»¶æ—¶ï¼Œç”¨äºæ˜¾ç¤º
C51 COMPILER V9.60.7.0   MAIN                                                              04/14/2025 20:04:11 PAGE 3   

 115   4                                      P0 = 0x00; // æ¶ˆéš
 116   4                                      count+=delayInternal;
 117   4                              }
 118   3                      }
 119   2                      total_1--;
 120   2                      if(total_1==0)total_1=total_0;//å¾ªç¯
 121   2              }
 122   1      }
 123          
 124          void main()
 125          {
 126   1              test5();
 127   1              while(1);
 128   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    590    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     44      34
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
