C51 COMPILER V9.60.7.0   LCD1602                                                           04/22/2025 18:48:54 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: D:\3software\keil\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) BROWSE INCDIR(D:\3software\keil\C51\I
                    -NC\Atmel) DEBUG OBJECTEXTEND PRINT(.\Listings\LCD1602.lst) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include "lcd1602.h"
   2          
   3          /*******************************************************************************
   4          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_write_cmd
   5          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : LCD1602Ð´ï¿½ï¿½ï¿½ï¿½
   6          * ï¿½ï¿½    ï¿½ï¿½       : cmdï¿½ï¿½Ö¸ï¿½ï¿½
   7          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
   8          *******************************************************************************/
   9          #if (LCD1602_4OR8_DATA_INTERFACE==0)//8Î»LCD
  10          void lcd1602_write_cmd(u8 cmd)
  11          {
  12   1              LCD1602_RS=0;//Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  13   1              LCD1602_RW=0;//Ñ¡ï¿½ï¿½Ð´
  14   1              LCD1602_E=0;
  15   1              LCD1602_DATAPORT=cmd;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  16   1              delay_ms(1);
  17   1              LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
  18   1              delay_ms(1);
  19   1              LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½    
  20   1      }
  21          #else   //4Î»LCD
              void lcd1602_write_cmd(u8 cmd)
              {
                      LCD1602_RS=0;//Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      LCD1602_RW=0;//Ñ¡ï¿½ï¿½Ð´
                      LCD1602_E=0;
                      LCD1602_DATAPORT=cmd;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      
                      LCD1602_DATAPORT=cmd<<4;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½    
              }
              #endif
  40          
  41          /*******************************************************************************
  42          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_write_data
  43          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : LCD1602Ð´ï¿½ï¿½ï¿½ï¿½
  44          * ï¿½ï¿½    ï¿½ï¿½       : datï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  45          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
  46          *******************************************************************************/
  47          #if (LCD1602_4OR8_DATA_INTERFACE==0)//8Î»LCD
  48          void lcd1602_write_data(u8 dat) 
  49          {
  50   1              LCD1602_RS=1;//Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  51   1              LCD1602_RW=0;//Ñ¡ï¿½ï¿½Ð´
  52   1              LCD1602_E=0;
  53   1              LCD1602_DATAPORT=dat;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  54   1              delay_ms(1);
C51 COMPILER V9.60.7.0   LCD1602                                                           04/22/2025 18:48:54 PAGE 2   

  55   1              LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
  56   1              delay_ms(1);
  57   1              LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½            
  58   1      }
  59          #else
              void lcd1602_write_data(u8 dat) 
              {
                      LCD1602_RS=1;//Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      LCD1602_RW=0;//Ñ¡ï¿½ï¿½Ð´
                      LCD1602_E=0;
                      LCD1602_DATAPORT=dat;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      
                      LCD1602_DATAPORT=dat<<4;//×¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=1;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½
                      delay_ms(1);
                      LCD1602_E=0;//Ê¹ï¿½Ü½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½            
              }
              #endif
  78          
  79          /*******************************************************************************
  80          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_init
  81          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : LCD1602ï¿½ï¿½Ê¼ï¿½ï¿½
  82          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
  83          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
  84          *******************************************************************************/
  85          #if (LCD1602_4OR8_DATA_INTERFACE==0)//8Î»LCD
  86          void lcd1602_init(void)
  87          {
  88   1              lcd1602_write_cmd(0x38);//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½8Î»ï¿½ï¿½ï¿½ï¿½Ê¾2ï¿½Ð£ï¿½5*7ï¿½ï¿½ï¿½ï¿½/ï¿½Ö·ï¿½
  89   1              lcd1602_write_cmd(0x0c);//ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ü¿ï¿½ï¿½ï¿½ï¿½Þ¹ï¿½ê£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ë¸
  90   1              lcd1602_write_cmd(0x06);//Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½Æ¶ï¿½
  91   1              lcd1602_write_cmd(0x01);//ï¿½ï¿½ï¿½ï¿½  
  92   1      }
  93          #else
              void lcd1602_init(void)
              {
                      lcd1602_write_cmd(0x28);//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½4Î»ï¿½ï¿½ï¿½ï¿½Ê¾2ï¿½Ð£ï¿½5*7ï¿½ï¿½ï¿½ï¿½/ï¿½Ö·ï¿½
                      lcd1602_write_cmd(0x0c);//ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ü¿ï¿½ï¿½ï¿½ï¿½Þ¹ï¿½ê£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ë¸
                      lcd1602_write_cmd(0x06);//Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½Æ¶ï¿½
                      lcd1602_write_cmd(0x01);//ï¿½ï¿½ï¿½ï¿½  
              }
              #endif
 102          
 103          /*******************************************************************************
 104          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_clear
 105          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : LCD1602ï¿½ï¿½ï¿½ï¿½
 106          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
 107          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
 108          *******************************************************************************/
 109          void lcd1602_clear(void)
 110          {
 111   1              lcd1602_write_cmd(0x01);        
 112   1      }
 113          
 114          /*******************************************************************************
 115          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_show_string
 116          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : LCD1602ï¿½ï¿½Ê¾ï¿½Ö·ï¿½
C51 COMPILER V9.60.7.0   LCD1602                                                           04/22/2025 18:48:54 PAGE 3   

 117          * ï¿½ï¿½    ï¿½ï¿½       : x,yï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ê£¬x=0~15ï¿½ï¿½y=0~1;
 118                                             strï¿½ï¿½ï¿½ï¿½Ê¾ï¿½Ö·ï¿½ï¿½ï¿½
 119          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½
 120          *******************************************************************************/
 121          void lcd1602_show_string(u8 x,u8 y,u8 *str)
 122          {
 123   1              u8 i=0;
 124   1      
 125   1              if(y>1|x>15)return;//ï¿½ï¿½ï¿½Ð²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç¿ï¿½ï¿½ï¿½Ë³ï¿½
 126   1      
 127   1              if(y<1) //ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Ê¾
 128   1              {       
 129   2                      while(*str!='\0')//ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½'\0'ï¿½ï¿½Î²ï¿½ï¿½Ö»ÒªÇ°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý¾ï¿½ï¿½ï¿½Ê¾
 130   2                      {
 131   3                              if(i<16-x)//ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½È³ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Î§ï¿½ï¿½ï¿½ï¿½ï¿½ÚµÚ¶ï¿½ï¿
             -½Ð¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
 132   3                              {
 133   4                                      lcd1602_write_cmd(0x80+i+x);//ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½        
 134   4                              }
 135   3                              else
 136   3                              {
 137   4                                      lcd1602_write_cmd(0x40+0x80+i+x-16);//ï¿½Ú¶ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½        
 138   4                              }
 139   3                              lcd1602_write_data(*str);//ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½
 140   3                              str++;//Ö¸ï¿½ï¿½ï¿½ï¿½ï¿½
 141   3                              i++;    
 142   3                      }       
 143   2              }
 144   1              else    //ï¿½ï¿½2ï¿½ï¿½ï¿½ï¿½Ê¾
 145   1              {
 146   2                      while(*str!='\0')
 147   2                      {
 148   3                              if(i<16-x) //ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½È³ï¿½ï¿½ï¿½ï¿½Ú¶ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Î§ï¿½ï¿½ï¿½ï¿½ï¿½Úµï¿½Ò»ï
             -¿½Ð¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
 149   3                              {
 150   4                                      lcd1602_write_cmd(0x80+0x40+i+x);       
 151   4                              }
 152   3                              else
 153   3                              {
 154   4                                      lcd1602_write_cmd(0x80+i+x-16); 
 155   4                              }
 156   3                              lcd1602_write_data(*str);
 157   3                              str++;
 158   3                              i++;    
 159   3                      }       
 160   2              }                               
 161   1      }
 162          
 163          /*******************************************************************************
 164          * ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½       : lcd1602_num_2_str
 165          * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½               : ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½Îªï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½LCD1602ï¿½ï¿½
 166          * ï¿½ï¿½    ï¿½ï¿½       : ï¿½ï¿½ï¿½ï¿½
 167          * ï¿½ï¿½    ï¿½ï¿½       : Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½
 168          *******************************************************************************/
 169          unsigned char * lcd1602_num_2_str(unsigned char num){
 170   1              static unsigned char key_str[3];  // ï¿½ï¿½ï¿½Ú´æ´¢ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½,×¢ï¿½ï¿½ï¿½ï¿
             -½ï¿½ï¿½ï¿½'\0'
 171   1              if(num>=10){
 172   2                      key_str[0]=1+'0';
 173   2                      key_str[1]=num-10+'0';
 174   2              }else{
 175   2                      key_str[0]=0+'0';
C51 COMPILER V9.60.7.0   LCD1602                                                           04/22/2025 18:48:54 PAGE 4   

 176   2                      key_str[1]=num+'0';
 177   2              }
 178   1                      key_str[2]='\0';//ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 179   1              return key_str;
 180   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    283    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
